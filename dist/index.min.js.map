{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/utility/css.js","webpack:///./src/utility/corners.js","webpack:///external \"numeric\"","webpack:///./src/utility/projections.js","webpack:///external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}","webpack:///external {\"commonjs\":\"leaflet\",\"commonjs2\":\"leaflet\",\"amd\":\"leaflet\",\"root\":\"L\"}","webpack:///./src/distortableVideoOverlay.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__5__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","key","_ref","_defineProperty","matrix","matrixValues","j","push","toFixed","concat","join","origin","target","width","height","tx","ty","tz","arguments","length","undefined","calculateRectangleCorners","topLeft","left","x","top","y","right","bottom","topRight","bottomRight","bottomLeft","areCornersEqual","corner","otherCorner","element","jElement","$","corners","arr","some","b","_addCondition","numeric","solve","_numeric","firstCondition","secondCondition","_leaflet","_interopRequireDefault","_jquery","_projections","_corners","_css","DistortableVideoOverlay","L","VideoOverlay","extend","initialize","bounds","options","this","_url","_bounds","_getCorners","Util","setOptions","setBounds","setCorners","_boundsToCorners","_map","_reset","_initImage","_image","style","_this","image","map","getContainer","default","css","getCssWithPrefixes","originAfterReset","getElementCorners","_projectVideoOnMap","point","_this$_map$latLngToLa","latLngToLayerPoint","Math","round","_animateZoom","e","_this2","zoom","center","videoPosition","_this2$_map$_latLngTo","_latLngToNewLayerPoint","pixelicPositionProvider","videoElement","geographicCorners","_getTargetCorners","cssTransformValue","areSomeCornersEqual","_projectAsRectangle","_projectWithProjectiveMatrix","matrix3d","findProjectiveMatrix","projectiveMatrixToCssValue","xCoordinates","getXCoordinates","yCoordinates","getYCoordinates","minX","min","apply","_toConsumableArray","maxX","max","minY","maxY","size","afterScalingSize","getTranslate3dCssValue","getScale3dCssValue","isCorners","_isPointArray","_pointArrayToCorners","latLngBounds","getNorthWest","getNorthEast","getSouthWest","getSouthEast","points","_points","_slicedToArray","Array","isArray","_value","distortableVideoOverlay","url"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"numeric\"), require(\"jquery\"), require(\"leaflet\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"numeric\", \"jquery\", \"leaflet\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"numeric\"), require(\"jquery\"), require(\"leaflet\")) : factory(root[\"numeric\"], root[\"jQuery\"], root[\"L\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__4__, __WEBPACK_EXTERNAL_MODULE__5__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","export function getCssWithPrefixes(key, value) {\r\n    return {\r\n        [\"-webkit-\" + key]: value,\r\n        [\"-khtml-\" + key]: value,\r\n        [\"-moz-\" + key]: value,\r\n        [\"-ms-\" + key]: value,\r\n        [\"-o-\" + key]: value,\r\n        [key]: value\r\n    };\r\n}\r\n\r\nexport function projectiveMatrixToCssValue(matrix) {\r\n    const matrixValues = [];\r\n\r\n    for (let i = 0; i < 4; i++) {\r\n        for (let j = 0; j < 4; j++)\r\n            matrixValues.push(matrix[j][i].toFixed(20));\r\n    }\r\n\r\n    return `matrix3d(${matrixValues.join(',')})`;\r\n}\r\n\r\nexport function getScale3dCssValue(origin, target) {\r\n    return `scale3d(${target.width / origin.width}, ${target.height / origin.height}, 1)`;\r\n}\r\n\r\nexport function getTranslate3dCssValue(tx, ty, tz = 0) {\r\n    return `translate3d(${tx}px, ${ty}px, ${tz}px)`;\r\n}","export function isCorners(value) {\r\n    const { topLeft, topRight, bottomLeft, bottomRight } = value;\r\n\r\n    return !!topLeft && !!topRight && !!bottomLeft && !!bottomRight;\r\n}\r\n\r\nexport function getElementCorners(element) {\r\n    const jElement = $(element);\r\n    return calculateRectangleCorners({ x: 0, y: 0 }, jElement.height(), jElement.width());\r\n}\r\n\r\nexport function calculateRectangleCorners(topLeft, height, width) {\r\n    const { x: left, y: top } = topLeft;\r\n    const right = left + width;\r\n    const bottom = top + height;\r\n\r\n    const topRight = { x: right, y: top };\r\n    const bottomRight = { x: right, y: bottom };\r\n    const bottomLeft = { x: left, y: bottom };\r\n\r\n    return { topLeft, topRight, bottomRight, bottomLeft };\r\n}\r\n\r\nexport function areSomeCornersEqual(corners) {\r\n    const { topLeft, topRight, bottomRight, bottomLeft } = corners;\r\n\r\n    if (areCornersEqual(topLeft, topRight)) return true;\r\n\r\n    const arr = [topLeft, topRight];\r\n    if (arr.some(corner => areCornersEqual(corner, bottomRight))) return true;\r\n\r\n    arr.push(bottomRight);\r\n\r\n    return arr.some(corner => areCornersEqual(corner, bottomLeft));\r\n}\r\n\r\nexport function areCornersEqual(corner, otherCorner) {\r\n    return corner.x === otherCorner.x && corner.y === otherCorner.y;\r\n}\r\n\r\nexport function getXCoordinates(corners) {\r\n    const { topLeft, topRight, bottomRight, bottomLeft } = corners;\r\n    return [topLeft.x, topRight.x, bottomRight.x, bottomLeft.x];\r\n}\r\n\r\nexport function getYCoordinates(corners) {\r\n    const { topLeft, topRight, bottomRight, bottomLeft } = corners;\r\n    return [topLeft.y, topRight.y, bottomRight.y, bottomLeft.y];\r\n}","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import numeric from \"numeric\";\r\n\r\nexport function findProjectiveMatrix(origin, target) {\r\n    let matrix = [];\r\n    let b = [];\r\n\r\n    _addCondition(matrix, b, origin.topLeft, target.topLeft);\r\n    _addCondition(matrix, b, origin.topRight, target.topRight);\r\n    _addCondition(matrix, b, origin.bottomLeft, target.bottomLeft);\r\n    _addCondition(matrix, b, origin.bottomRight, target.bottomRight);\r\n\r\n    const x = numeric.solve(matrix, b);\r\n\r\n    return [[x[0], x[1], 0, x[2]],\r\n    [x[3], x[4], 0, x[5]],\r\n    [0, 0, 1, 0],\r\n    [x[6], x[7], 0, 1]];\r\n}\r\n\r\nfunction _addCondition(matrix, b, origin, target) {\r\n    const { x, y } = origin;\r\n    const firstCondition = [x, y, 1, 0, 0, 0, -target.x * x, -target.x * y];\r\n    const secondCondition = [0, 0, 0, x, y, 1, -target.y * x, -target.y * y];\r\n    matrix.push(firstCondition);\r\n    b.push(target.x);\r\n\r\n    matrix.push(secondCondition);\r\n    b.push(target.y);\r\n}","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","import L from \"leaflet\";\r\nimport $ from \"jquery\";\r\n\r\nimport { findProjectiveMatrix } from \"./utility/projections\";\r\nimport { isCorners, getElementCorners, getXCoordinates, getYCoordinates, areSomeCornersEqual } from \"./utility/corners\";\r\nimport { getCssWithPrefixes, projectiveMatrixToCssValue, getScale3dCssValue, getTranslate3dCssValue } from \"./utility/css\";\r\n\r\nconst DistortableVideoOverlay = L.VideoOverlay.extend({\r\n    initialize: function (element, bounds, options) {\r\n        this._url = element;\r\n        this._bounds = this._getCorners(bounds);\r\n        L.Util.setOptions(this, options);\r\n    },\r\n\r\n    setBounds: function (bounds) {\r\n        return this.setCorners(this._boundsToCorners(bounds));\r\n    },\r\n\r\n    setCorners: function (corners) {\r\n        this._bounds = this._getCorners(corners);\r\n\r\n        if (this._map) {\r\n            this._reset();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    _initImage: function () {\r\n        L.VideoOverlay.prototype._initImage.call(this);\r\n        this._image.style['objectFit'] = 'fill';\r\n    },\r\n\r\n    _reset: function () {\r\n        const image = this._image;\r\n        const map = this._map.getContainer();\r\n\r\n        $(image).css(getCssWithPrefixes(\"transition\", \"width 0.05s\"));\r\n        image.style.width = $(map).width() + 'px';\r\n        image.style.height = $(map).height() + 'px';\r\n\r\n        const originAfterReset = getElementCorners(map);\r\n        const pixelicPositionProvider = (point) => {\r\n            const { x, y } = this._map.latLngToLayerPoint(point);\r\n            return { x: Math.round(x), y: Math.round(y) }\r\n        };\r\n\r\n        this._projectVideoOnMap(originAfterReset, pixelicPositionProvider);\r\n    },\r\n\r\n    _animateZoom: function (e) {\r\n        const { zoom, center } = e;\r\n        const videoPosition = getElementCorners(this.image);\r\n        const pixelicPositionProvider = (point) => {\r\n            const { x, y } = this._map._latLngToNewLayerPoint(point, zoom, center);\r\n            return { x: Math.round(x), y: Math.round(y) }\r\n        };\r\n\r\n        this._projectVideoOnMap(videoPosition, pixelicPositionProvider);\r\n    },\r\n\r\n    _projectVideoOnMap: function (origin, pixelicPositionProvider) {\r\n        const corners = this._bounds;\r\n        const videoElement = $(this._image);\r\n        const target = _getTargetCorners(corners, pixelicPositionProvider);\r\n\r\n        const cssTransformValue = areSomeCornersEqual(target) ? this._projectAsRectangle(target) :\r\n            this._projectWithProjectiveMatrix(origin, target);\r\n\r\n        videoElement.css(getCssWithPrefixes(\"transform\", cssTransformValue));\r\n        videoElement.css(getCssWithPrefixes(\"transform-origin\", '0 0 0px'));\r\n    },\r\n\r\n    _projectWithProjectiveMatrix: function (origin, target) {\r\n        const matrix3d = findProjectiveMatrix(origin, target);\r\n        return projectiveMatrixToCssValue(matrix3d);\r\n    },\r\n\r\n    _projectAsRectangle: function (target) {\r\n        const videoElement = $(this._image);\r\n        const xCoordinates = getXCoordinates(target);\r\n        const yCoordinates = getYCoordinates(target);\r\n\r\n        const minX = Math.min(...xCoordinates);\r\n        const maxX = Math.max(...xCoordinates);\r\n        const minY = Math.min(...yCoordinates);\r\n        const maxY = Math.max(...yCoordinates);\r\n\r\n        const size = { height: videoElement.height(), width: videoElement.width() };\r\n        const afterScalingSize = { height: maxY - minY, width: maxX - minX };\r\n\r\n        return `${getTranslate3dCssValue(minX, minY)} ${getScale3dCssValue(size, afterScalingSize)}`;\r\n    },\r\n\r\n    _getCorners: function (value) {\r\n        if (isCorners(value)) return value;\r\n        if (this._isPointArray(value)) return this._pointArrayToCorners(value);\r\n        return this._boundsToCorners(value);\r\n    },\r\n\r\n    _boundsToCorners: function (bounds) {\r\n        bounds = L.latLngBounds(bounds);\r\n\r\n        return {\r\n            topLeft: bounds.getNorthWest(),\r\n            topRight: bounds.getNorthEast(),\r\n            bottomLeft: bounds.getSouthWest(),\r\n            bottomRight: bounds.getSouthEast()\r\n        };\r\n    },\r\n\r\n    _pointArrayToCorners: function (points) {\r\n        const [topLeft, topRight, bottomRight, bottomLeft] = points;\r\n        return { topLeft, topRight, bottomRight, bottomLeft };\r\n    },\r\n\r\n    _isPointArray: function (value) {\r\n        if (!Array.isArray(value)) return false;\r\n\r\n        const [topLeft, topRight, bottomRight, bottomLeft] = value;\r\n        return !!topLeft && !!topRight && !!bottomRight && !!bottomLeft;\r\n    }\r\n});\r\n\r\nfunction _getTargetCorners(geographicCorners, pixelicPositionProvider) {\r\n    const { topLeft, topRight, bottomLeft, bottomRight } = geographicCorners;\r\n\r\n    return {\r\n        topLeft: pixelicPositionProvider(topLeft),\r\n        topRight: pixelicPositionProvider(topRight),\r\n        bottomLeft: pixelicPositionProvider(bottomLeft),\r\n        bottomRight: pixelicPositionProvider(bottomRight)\r\n    }\r\n};\r\n\r\nexport default function distortableVideoOverlay(url, corners, options) {\r\n    return new DistortableVideoOverlay(url, corners, options);\r\n}\r\n\r\nL.DistortableVideoOverlay = DistortableVideoOverlay;\r\nL.distortableVideoOverlay = distortableVideoOverlay;"],"sourceRoot":""}